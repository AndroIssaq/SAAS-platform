# ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุดููุฑ ุงูุดุงูู

## ๐ฏ ุงูุญููู ุงููุทููุจ ุชุดููุฑูุง:

### 1. ุญููู ูุตูุฉ (ุณููุฉ):
- โ `service_type` 
- โ `package_name`
- โ `payment_method`
- โ `step_6_data` (JSON)

### 2. ุญููู ูุงููุฉ (ุชุญุชุงุฌ ุญุฐุฑ):
- โ๏ธ `total_amount`
- โ๏ธ `deposit_amount`
- โ๏ธ `remaining_amount`

### 3. ุงูุตูุฑ ูู Storage:
- ๐ `admin_signature`
- ๐ `client_signature`
- ๐ `admin_id_card`
- ๐ `client_id_card`
- ๐ `payment_proofs`

---

## โ๏ธ ุงูุชุญุฐูุฑุงุช ุงููููุฉ:

### ุงููุจุงูุบ ุงููุงููุฉ:

```
โ ุงููุดููุฉ:
ุฅุฐุง ุดููุฑูุง total_amount, deposit_amount, remaining_amount:
- ูู ูุณุชุทูุน ุนูู SUM ูู SQL
- ูู ูุณุชุทูุน ุญุณุงุจ ุงูุฅุฌูุงููุงุช
- ูู ูุณุชุทูุน ุนูู ุชูุงุฑูุฑ ูุงููุฉ
- ูู ูุณุชุทูุน ุงูููุชุฑุฉ ุญุณุจ ุงููุจูุบ

โ ุงูุญู ุงูุจุฏูู:
ูุดููุฑ ุงููุจุงูุบ ููู ูุถูู ุญููู "shadow" ููุญุณุงุจุงุช:
- total_amount_encrypted (ูุดูุฑ ููุนุฑุถ)
- total_amount (ุบูุฑ ูุดูุฑ ููุญุณุงุจุงุช - ููู ูุญูู ุจู RLS)
```

**ุฃู:**

```
โ ุงูุญู ุงูููุตู ุจู:
- ูุชุฑู ุงููุจุงูุบ ุบูุฑ ูุดูุฑุฉ
- ูุญูููุง ุจู RLS (Row Level Security)
- ุงููุจุงูุบ ุบูุฑ ุญุณุงุณุฉ ูุซู ุงูุฃุณูุงุก ูุงูููุงุชู
```

---

### ุงูุตูุฑ ูู Storage:

```
๐ ุงููุถุน ุงูุญุงูู (ุขูู ุจุงููุนู):
1. Storage buckets: PRIVATE (not public)
2. Access: Signed URLs only (expires after 1 hour)
3. RLS policies: ุชููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ

โ ุงูุชุดููุฑ ุงููุงูู ููุตูุฑ (ูุนูุฏ ุฌุฏุงู):
- ูุดููุฑ ูุญุชูู ุงูุตูุฑุฉ ูุจู ุงูุฑูุน
- ููู ุงูุชุดููุฑ ุนูุฏ ุงูุนุฑุถ ูู ุงููุชุตูุญ
- ุงููุดููุฉ: ูู ุชุนูู ุงูุตูุฑ ูู PDF/Email
- ุงูุญู ูุนูุฏ ููุญุชุงุฌ encryption ูู ุงูู client-side
```

---

## ๐ก ุงูุชูุตูุฉ ุงูููุงุฆูุฉ:

### ุงูุฎูุงุฑ 1: ุชุดููุฑ ูุชูุงุฒู (ููุตู ุจู โญ)

```typescript
// ุญููู ูุดูุฑุฉ:
โ client_name
โ client_email  
โ client_phone
โ company_name
โ service_description
โ notes
โ service_type
โ package_name
โ payment_method
โ step_1_data.client_info
โ step_6_data

// ุญููู ูุญููุฉ ุจู RLS (ุบูุฑ ูุดูุฑุฉ):
๐ total_amount
๐ deposit_amount
๐ remaining_amount

// ุตูุฑ ูุญููุฉ (Signed URLs + Private Storage):
๐ ุฌููุน ุงูุตูุฑ ูู Storage
```

**ุงููุฒุงูุง:**
- โ ุจูุงูุงุช ุงูุนููู ูููุง ูุดูุฑุฉ
- โ ุงูุชูุงุฑูุฑ ุงููุงููุฉ ุชุนูู
- โ ุงูุตูุฑ ุขููุฉ ุจุงููุนู
- โ ุฃุฏุงุก ููุชุงุฒ

---

### ุงูุฎูุงุฑ 2: ุชุดููุฑ 100% (ุงูุฃูุตู)

```typescript
// ูู ุดูุก ูุดูุฑ:
๐ ALL TEXT FIELDS
๐ ALL AMOUNTS (as encrypted strings)
๐ ALL IMAGES (encrypted binary before upload)

// ุงููุดุงูู:
โ ูุง ูููู ุนูู SUM/AVG/ุชูุงุฑูุฑ ูุงููุฉ
โ ุงูุตูุฑ ูู ุชุนูู ูู PDF
โ ุฃุฏุงุก ุฃุจุทุฃ
โ ุชุนููุฏ ูุจูุฑ ูู ุงูููุฏ
```

---

## ๐ง ูุฑุงุฑู:

1. **ุงูุฎูุงุฑ 1 (ูุชูุงุฒู)**: ุฃุดูุฑ ุงููุตูุต ููุทุ ุฃุชุฑู ุงููุจุงูุบ ูุญููุฉ ุจู RLSุ
2. **ุงูุฎูุงุฑ 2 (ุฃูุตู)**: ุฃุดูุฑ ูู ุดูุก ุญุชู ูู ูุณุฑูุง ุงูุชูุงุฑูุฑุ
3. **ูุฎุตุต**: ุญุฏุฏ ุจุงูุถุจุท ุฅูุด ุชุฑูุฏ ุชุดูุฑ ูุฅูุด ุชุชุฑูุ

---

## ๐ ููุงุฑูุฉ ุงูุฃูุงู:

| ุงูุฌุงูุจ | ุงูุฎูุงุฑ 1 (ูุชูุงุฒู) | ุงูุฎูุงุฑ 2 (ุฃูุตู) |
|--------|-------------------|-----------------|
| ุฃุณูุงุก + ููุงุชู | ๐ ูุดูุฑ 100% | ๐ ูุดูุฑ 100% |
| ุงูุฎุฏูุฉ ูุงูุจุงูุฉ | ๐ ูุดูุฑ | ๐ ูุดูุฑ |
| ุงููุจุงูุบ ุงููุงููุฉ | ๐ก๏ธ RLS ูุญูู | ๐ ูุดูุฑ (ููู ุจุฏูู ุชูุงุฑูุฑ) |
| ุงูุตูุฑ | ๐ก๏ธ Private + Signed URLs | ๐ binary ูุดูุฑ (ูุนูุฏ) |
| ุงูุชูุงุฑูุฑ | โ ุชุนูู | โ ูุชุนุทูุฉ |
| ุงูุฃุฏุงุก | โ ููุชุงุฒ | โ๏ธ ุฃุจุทุฃ |

---

## ๐ฏ ุณุคุงู ููู:

**ูู ุงููุจุงูุบ ุงููุงููุฉ (total_amount) ุชุนุชุจุฑ PII (Personally Identifiable Information)ุ**

- ูู ูุนุธู ุงููุนุงููุฑ: **ูุง**
- ุงููุจุงูุบ ูุญุฏูุง ูุง ุชูุดู ูููุฉ ุงูุดุฎุต
- ูู ูุนูููุงุช ุชุฌุงุฑูุฉ ูููุณุช ุดุฎุตูุฉ

**ูุฐูู: Cloudflare ู GDPR ูู ูุทูุจูุง ุชุดููุฑูุง ุจุงูุถุฑูุฑุฉ**
